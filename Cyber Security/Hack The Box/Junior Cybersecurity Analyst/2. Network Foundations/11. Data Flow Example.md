2025-08-04 20:23
 
Status: #Finished 

Tags: [[networking]] [[hack the box]] [[fundamentals]] [[cyber security]] 



# ğŸŒ Data Flow Example â€“ Accessing a Website

This example explains what happens step-by-step when a user accesses `www.example.com` using a laptop connected to a wireless home network.

---

## 1. ğŸ“¶ Connecting to the Internet (WLAN)
- User selects SSID (Wi-Fi network name).
- Enters password for WPA2/WPA3 security.
- Connection is established.
- DHCP assigns network configuration (IP, subnet, gateway, DNS).

---

## 2. ğŸ§­ IP Configuration via DHCP
- **DHCP Discover**: Laptop requests IP if it doesnâ€™t have one.
- **DHCP Offer/Request/Ack**: Router assigns private IP (e.g., `192.168.1.10`) and config details:
  - Subnet Mask
  - Default Gateway
  - DNS Server

---

## 3. ğŸŒ DNS Resolution
- User enters `www.example.com` in browser.
- DNS query is sent to the DNS server (usually from ISP or Google DNS).
- DNS server replies with IP address (e.g., `93.184.216.34`).

---

## 4. ğŸ“¦ Data Encapsulation (OSI/TCP-IP Layers)

| Layer            | Action                                                                 |
|------------------|------------------------------------------------------------------------|
| Application      | Browser creates HTTP/HTTPS request                                     |
| Transport (L4)   | Request is wrapped in TCP segment (e.g., destination port 443)         |
| Internet (L3)    | Segment is placed in an IP packet (src: `192.168.1.10`, dst: `93.184.216.34`) |
| Link (L2)        | Packet is encapsulated in Wi-Fi frame with source/dest MAC addresses   |

- If needed, ARP resolves the routerâ€™s MAC address before sending the frame.

---

## 5. ğŸŒ Network Address Translation (NAT)
- Router replaces private IP with public IP (e.g., `203.0.113.45`).
- Packet is forwarded to the ISP, then routed through the internet to the web server.
- Intermediate routers use the destination IP to forward the packet.

---

## 6. ğŸ–¥ï¸ Server Response
- Server firewall checks port 80/443.
- Web server (Apache/Nginx/IIS) receives request.
- Processes and sends HTML, CSS, JS content as response.
- Response goes back:
  - From server `93.184.216.34`
  - To router public IP `203.0.113.45`
- Router uses NAT to forward it to laptop `192.168.1.10`.

---

## 7. ğŸ§¯ Decapsulation and Rendering
- Laptop receives response.
- Strips:
  - Wi-Fi Frame (L2)
  - IP Header (L3)
  - TCP Header (L4)
- Application Layer extracts content.
- Browser renders the webpage.

---

## ğŸ” Summary Flow



## References



