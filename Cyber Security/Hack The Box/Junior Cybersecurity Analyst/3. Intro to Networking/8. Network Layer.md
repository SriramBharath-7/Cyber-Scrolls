2025-08-06 19:36

Status: #Finished 

Tags: [[cyber security]] [[fundamentals]] [[networking]] [[hack the box]] 


# 🌐 OSI Model – Layer 3: Network Layer

---

## 📖 What is the Network Layer?

The **Network Layer** (Layer 3 of the OSI model) is responsible for:
- **Logical addressing**
- **Routing**
- **Packet forwarding** between devices, even across multiple networks.

It ensures data packets are routed from the **source** to the **destination**, regardless of whether they are on the same subnet or not.

---

## 🧠 Key Functions of the Network Layer

| Function             | Description                                                                 |
|----------------------|-----------------------------------------------------------------------------|
| **Logical Addressing** | Assigns unique IP addresses (IPv4/IPv6) to devices for identification.     |
| **Routing**            | Determines the best path for data to reach its destination across networks.|
| **Path Selection**     | Based on routing tables, selects optimal route using routing protocols.    |
| **Packet Forwarding**  | Forwards packets from node to node until it reaches the destination.       |
| **Fragmentation**      | Splits large packets into smaller pieces for transmission.                |

> 📌 **Note**: Nodes (typically routers) at this layer **don’t process the data itself**; they only read the packet headers for address info.

---

## 📦 What Happens at Layer 3?

- Data from the **Transport Layer** (Layer 4) is encapsulated in a **packet**.
- The **packet** contains:
  - A **header** (with source and destination IPs)
  - The **payload** (actual data)
- Packets are then sent **hop by hop** through routers.
- The destination device decapsulates and sends it to the next layer.

---

## 📑 Common Layer 3 Protocols

| Protocol | Purpose                                                                 |
|----------|-------------------------------------------------------------------------|
| **IPv4 / IPv6** | Core Internet Protocols for addressing and routing.               |
| **IPsec**       | Secures IP traffic with encryption and authentication.           |
| **ICMP**        | Internet Control Message Protocol (used in ping, error reporting).|
| **IGMP**        | Internet Group Management Protocol (used for multicast groups).   |
| **RIP**         | Routing Information Protocol (simple distance-vector routing).    |
| **OSPF**        | Open Shortest Path First (dynamic link-state routing protocol).   |

---

## 🔁 Routing Process (Simplified)

```
Sender --> Router 1 --> Router 2 --> Router 3 --> Destination
```

At each hop:
- The router checks the **destination IP**.
- Uses its **routing table** to decide the next best hop.
- **Forwards** the packet accordingly.

Intermediate routers **do not process** the payload or higher-layer protocols. They **only care about IP addresses**.

---

## 🧪 Real-World Example

Imagine you’re sending a message from your PC in India to a server in the USA:

- Your message is broken into **packets**.
- Each packet has:
  - **Your IP** (source)
  - **Server IP** (destination)
- Routers between you and the server forward the packet based on **routing tables** until it arrives at the destination.

---

## 🔐 Why It Matters in Cybersecurity

Understanding Layer 3 is vital for:
- **Network scanning** (identifying hosts via IP)
- **Firewall rules** (based on IP addresses/subnets)
- **Spoofing attacks** (faking source IPs)
- **Routing attacks** (e.g., BGP hijacking, route poisoning)

> 🧠 As a penetration tester or security expert, Layer 3 is where **network visibility**, **traffic control**, and **attack surface discovery** all begin.

---

## 🏁 Summary

- Layer 3 = **Network Layer**
- Key roles:
  - Logical Addressing
  - Routing
  - Packet Forwarding
- Core Protocols: **IP, ICMP, OSPF, RIP, IPsec**
- Devices: **Routers**, **Layer 3 Switches**
- Packet = L3 PDU (Protocol Data Unit)

> 📌 Without Layer 3, devices wouldn't be able to **talk across networks**, making the global internet impossible.


---

## References



