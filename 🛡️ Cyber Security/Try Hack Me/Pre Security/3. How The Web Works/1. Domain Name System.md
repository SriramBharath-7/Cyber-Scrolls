2025-08-06 17:18

Status: #Finished 

Tags: [[tryhackme]] [[cyber security]] [[fundamentals]] 


# 🌐 DNS (Domain Name System) – Full Study Notes (THM + HTB)

---

## 📌 What is DNS?

- DNS = Domain Name System  
- Think of DNS like the **Internet’s phonebook**  
- It translates **domain names** (like `tryhackme.com`) into **IP addresses** (like `104.26.10.229`)  
- Helps us avoid remembering complex IP addresses  
- Every device on the internet has a **unique IP** (IPv4 or IPv6)  

---

## 🏛️ Domain Hierarchy

```
Root (.)  
└── TLD (.com, .org, .uk)  
└── Second-Level Domain (e.g., tryhackme)  
└── Subdomain (e.g., admin.tryhackme.com)
```

### 🔝 TLD (Top-Level Domain)

- Rightmost part of the domain (`.com`, `.org`, `.uk`)
- **Types:**
  - `gTLD` – Generic (e.g. `.com`, `.org`, `.net`)
  - `ccTLD` – Country-specific (e.g. `.uk`, `.ca`)
- Over 2000 TLDs exist today

### 🧬 Second-Level Domain

- Part before the TLD (e.g., `tryhackme` in `tryhackme.com`)
- Rules:
  - Max: 63 characters  
  - Allowed: `a-z`, `0-9`, `-`  
  - Can't start/end with `-` or have `--` in the middle

### 🧱 Subdomain

- Comes **before** the Second-Level Domain (e.g., `admin.tryhackme.com`)
- Can be nested: `jupiter.servers.tryhackme.com`
- Limit: Total domain length must be ≤ 253 characters
- No limit on number of subdomains

---

## 🧾 DNS Record Types

| Record | Function |
|--------|----------|
| **A**     | Maps to an **IPv4** address (e.g., `104.26.10.229`) |
| **AAAA**  | Maps to an **IPv6** address |
| **CNAME** | Points to another **domain name**, not IP |
| **MX**    | Mail exchange – directs to mail servers |
| **TXT**   | Stores free-form text (SPF, domain verification, etc.) |

---

## 🛰️ DNS Resolution Process (Step-by-Step)

1. **Browser Checks Local DNS Cache**
   - If found, returns cached IP
2. **If not found: Query Recursive DNS Resolver**
   - Usually provided by ISP (or custom DNS like `8.8.8.8`)
3. **Recursive DNS Queries Root DNS Server**
   - Root server points to correct **TLD server** (e.g., `.com`)
4. **TLD DNS Server → Authoritative Name Server**
   - e.g., `kip.ns.cloudflare.com` → provides final record
5. **DNS Response Travels Back**
   - Authoritative server → TLD server → Recursive Resolver → Your device
6. **Result is Cached with TTL**
   - Speeds up future lookups

---

## ⏱ TTL (Time To Live)

- A value (in seconds) attached to each DNS record  
- Determines how long a record stays cached  
- Reduces DNS lookup load  

---

## 🌐 IP Addresses & Why DNS Matters

- IP = Internet Protocol address  
- IPv4 Example: `104.26.10.229`  
- IPv6 Example: `2606:4700:20::681a:be5`  
- Humans use domain names → DNS translates to IPs → Internet uses IPs  

---

## 🛡️ DNS Use Beyond Websites

- **Email Delivery** → uses `MX` records  
- **Security & Verification** → uses `TXT` (e.g., SPF/DKIM/DMARC)
- **CDNs & Load Balancing** → uses `CNAME`, dynamic `A` records

---

## 📡 DNS Servers

| Type | Description |
|------|-------------|
| **Root DNS Servers** | The starting point, redirects to TLD servers |
| **TLD Servers** | Maintain records for each domain extension (e.g., `.com`, `.org`) |
| **Authoritative Name Servers** | Store actual DNS records for domains |
| **Recursive Resolvers** | Intermediary server that handles full DNS lookups for your device |

---

## 🔁 DNS Recap with Analogy

1. **You enter `tryhackme.com`**
2. Your system → checks local DNS cache
3. If not found → asks Recursive Resolver (e.g., ISP’s DNS)
4. Resolver → Root Server → TLD (.com) → Authoritative Server
5. IP (e.g., `104.26.10.229`) is returned
6. You connect to the website

💡 Think of it like mailing a letter:
- You write the address (domain)
- Your local post office (DNS resolver) routes it through layers (root → TLD → domain)
- The final destination is reached with the exact location (IP)

---

## 🔧 Bonus Tips

- Change your DNS settings to:
  - **Google DNS:** `8.8.8.8`, `8.8.4.4`
  - **Cloudflare DNS:** `1.1.1.1`, `1.0.0.1`
  - **OpenDNS:** `208.67.222.222`, `208.67.220.220`
- Use `nslookup`, `dig`, or `host` command-line tools to test DNS manually

---

🎯 **End of DNS Notes**  
✨ Mastering DNS is foundational for ethical hackers, penetration testers, and defenders alike!


## References



